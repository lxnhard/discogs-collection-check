let pokemonRepository=function(){let h=[],i="https://pokeapi.co/api/v2/pokemon/?limit=150";function a(){return h.slice(-150)}function b(a){h.push(a)}function c(b){let a=h.filter(a=>a.name.startsWith(b));if(a.length>0)return a[0];$("#search-input").tooltip("show"),$(document).on("click",function(){$("#search-input").tooltip("hide")})}function d(c){let d=document.querySelector(".pokemon-list"),b=document.createElement("li"),a=document.createElement("button");a.setAttribute("type","button"),a.setAttribute("data-toggle","modal"),a.setAttribute("data-target","#detailsModal"),a.classList.add("pokemonButton","list-group-item","list-group-item-action","w-100"),a.innerText=c.name,b.appendChild(a),d.appendChild(b),a.addEventListener("click",function(){j(c)})}function e(){return k(),fetch(i="https://pokeapi.co/api/v2/pokemon/?offset="+150*Math.floor(h.length/150)+"&limit=150").then(function(a){return a.json()}).then(function(a){a.results.forEach(function(a){b({name:a.name,detailsUrl:a.url})}),l()}).catch(function(a){console.error(a),l()})}function f(a){return k(),fetch(a.detailsUrl).then(function(a){return a.json()}).then(function(b){a.imageUrlFront=b.sprites.front_default,a.imageUrlBack=b.sprites.back_default,a.height=b.height,a.weight=b.weight,a.types=b.types,a.abilities=b.abilities,l()}).catch(function(a){console.error(a),l()})}function j(a){f(a).then(function(){m(a)})}function g(){return new Promise(function(c,b){150*Math.floor(h.length/150)<1154?e().then(function(){a().forEach(function(a){d(a)})}).then(function(){c()}):b()})}function k(){document.querySelector(".pokeball").classList.remove("hidden")}function l(){document.querySelector(".pokeball").classList.add("hidden")}function m(a){let f=$(".modal-title"),i=$("#modal-img-front"),k=$("#modal-img-back"),m=$(".detail-height"),n=$(".detail-weight"),o=$(".detail-types"),p=$(".detail-headline-types"),q=$(".detail-abilities");f.empty(),m.empty(),n.empty(),o.empty(),p.empty(),q.empty();let b=document.createElement("h1");b.innerText=a.name,b.classList.add("capitalize");let r=document.createElement("span");r.innerHTML=a.height+" m";let s=document.createElement("span");s.innerHTML=a.weight+" kg";let c=document.createElement("span"),d=document.createElement("span"),t=[];a.types.forEach(function(a){t.push(" "+a.type.name)}),t.length<2?d.innerHTML="Type:":d.innerHTML="Types:",c.innerHTML=t.toString(),c.classList.add("capitalize");let e=document.createElement("span"),u=[];a.abilities.forEach(function(a){u.push(" "+a.ability.name)}),e.innerHTML=u.toString(),e.classList.add("capitalize"),f.append(b),m.append(r),n.append(s),o.append(c),p.append(d),q.append(e),a.imageUrlFront?i.attr("src",a.imageUrlFront):i.attr("src","img/fallback.svg"),a.imageUrlBack?k.attr("src",a.imageUrlBack):k.attr("src","img/fallback.svg"),$("#button-next").off().on("click",()=>{h.indexOf(a)<h.length-1?(i.attr("src",""),k.attr("src",""),j(h[h.indexOf(a)+1])):g().then(function(){i.attr("src",""),k.attr("src",""),j(h[h.indexOf(a)+1]),l()}).catch(function(){l()})}),$("#button-prev").off().on("click",()=>{h.indexOf(a)>0&&(i.attr("src",""),k.attr("src",""),j(h[h.indexOf(a)-1]))}),$("#detailsModal").on("hidden.bs.modal",function(){i.attr("src",""),k.attr("src","")})}return $("#search-form").submit(b=>{b.preventDefault(),$("#search-input").tooltip("hide");let d=$("#search-input").val().toLowerCase(),a=c(d);a&&(j(a),$("#detailsModal").modal("show"))}),$(window).scroll(function(){$(window).scrollTop()+$(window).height()==$(document).height()&&g().catch()}),{getAll:a,add:b,findName:c,addListItem:d,loadList:e,loadDetails:f,loadDisplay:g}}();pokemonRepository.loadDisplay(),$(document).ready(function(){$(window).scroll(function(){$(this).scrollTop()>50?$("#back-to-top").fadeIn():$("#back-to-top").fadeOut()}),$("#back-to-top").click(function(){return $("body,html").animate({scrollTop:0},400),!1})})
